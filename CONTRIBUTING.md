# Contributing Guide

Contributions are welcome, if you find some bugs or have some ideas, please open an issue or submit a pull request.

Please ensure that you are using clean code, following the coding style and code organization in existing code, and make sure all the tests pass.

Please submit **one PR that does one thing**, this is important, and helps us to review your code more easily and push to merge fast.

## AI Assistance

> ðŸ¤– When you submit PR, please point out which parts are generated by AI, if any.

All code generated by AI must be reviewed and tested by humans, and should follow the same coding style and code organization as existing code.

The AI generated code without refactoring will be rejected.

## Development and Testing

There are a lot of UI test cases in the `crates/story` folder, if you change the existing features you can run the tests to make sure they are working.

### Run story

Use `cargo run` to run the complete story examples to display them all in a gallery of GPUI components.

```bash
cargo run
```

### Run single example

There is also available some split examples, run `cargo run --example` to see the available examples.

```bash
cargo run --example table
```

### Rules

- Use `default` mouse cursor not `pointer` for buttons, unless it's a link button, we are building desktop apps, not web apps.
- Use `md` size for most cases and as the default.

## Profile the performance

When you change the rendering code, please profile the performance to make sure the FPS is still good.

You can use `MTL_HUD_ENABLED=1` environment variable to enable the Metal HUD to see the FPS and other performance metrics.

```bash
MTL_HUD_ENABLED=1 cargo run
```

> NOTE: Only available on macOS with Metal backend, and the FPS is up **limited your monitor refresh rate**, usually 60 or 120.

### Use Samply to profile the the performance

You can use [Samply](https://github.com/mstange/samply) to profile the performance of the application to get more detailed information.

```bash
samply record cargo run
```

Use `samply record` command to start rust development, and do some operations in the app that you want to profile, then stop the terminal with `ctrl-c`, then samply will open the browser to show the profile results.
